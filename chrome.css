/* These are for the popups */
menupopup,
panel {
  &::part(content) {
    display: flex !important;
    box-sizing: border-box !important;
    padding: 6px !important;
    color: var(--panel-color) !important;
    border-radius: 15px !important;
    border: 2px solid
      color-mix(in hsl, var(--panel-border-color), transparent 70%) !important;
    width: var(--panel-width) !important;
    box-shadow: var(--panel-shadow) !important;
    margin: var(--panel-shadow-margin) !important;
    min-width: 0 !important;
    min-height: 0 !important;
    max-height: round(
      up,
      100% - 2 * var(--panel-shadow-margin),
      1px
    ) !important;
    max-width: round(up, 100% - 2 * var(--panel-shadow-margin), 1px) !important;
    overflow: clip !important;
    scrollbar-color: transparent !important;
  }
}

/* When keepdividers is TRUE */
@media (-moz-bool-pref: "mod.forkedtidypopup.keepdividers") {
  panel toolbarseparator {
    margin: 4px 4px !important;
  }

  #appMenu-zoom-controls {
    padding-top: 0 !important;
    padding-inline: calc(
        var(--arrowpanel-menuitem-padding-inline) +
          var(--uc-arrowpanel-menuitem-margin-inline)
      )
      var(--uc-arrowpanel-menuitem-margin-inline) !important;
    padding-block: var(--uc-panel-zoom-padding-block) !important;
    margin: 0 !important;
  }
}

/* When keepdividers is FALSE - hide them */
@media not (-moz-bool-pref: "mod.forkedtidypopup.keepdividers") {
  panel toolbarseparator {
    display: none !important;
    margin: 0 !important;
  }

  menuseparator::before {
    display: none !important;
    margin: 0 !important;
  }

  #appMenu-zoom-controls {
    border-top: none !important;
    padding-top: 6px !important;
    padding-inline: calc(
        var(--arrowpanel-menuitem-padding-inline) +
          var(--uc-arrowpanel-menuitem-margin-inline)
      )
      var(--uc-arrowpanel-menuitem-margin-inline) !important;
    padding-block: var(--uc-panel-zoom-padding-block) !important;
    margin: calc(var(--panel-separator-margin-vertical) / 2) 0
      calc(var(--panel-separator-margin-vertical) * -0.5) !important;
  }

  #appMenu-zoom-controls > #appMenu-fullscreen-button2::before {
    display: none !important;
    margin: 0 !important;
  }
}

/* Apply styling to ALL items (including disabled) */
:is(
    panelview .toolbarbutton-1,
    toolbarbutton.subviewbutton,
    .widget-overflow-list .toolbarbutton-1,
    .toolbaritem-combined-buttons:is(
        :not([cui-areatype="toolbar"]),
        [overflowedItem="true"]
      )
      > toolbarbutton
  ) {
  padding: 5px 10px !important;
  border-radius: 8px !important;
}

/* Custom hover colors when enabled - only for non-disabled items */
@media (-moz-bool-pref: "mod.forkedtidypopup.usecustomhovercolor") {
  /* Light mode hover color */
  @media (prefers-color-scheme: light) {
    menu,
    menuitem,
    menucaption,
    :is(
        panelview .toolbarbutton-1,
        toolbarbutton.subviewbutton,
        .widget-overflow-list .toolbarbutton-1,
        .toolbaritem-combined-buttons:is(
            :not([cui-areatype="toolbar"]),
            [overflowedItem="true"]
          )
          > toolbarbutton
      ) {
      &:not([disabled]):hover {
        background-color: var(
          --mod-forkedtidypopup-hovercolor-light,
          rgba(243, 202, 176, 255)
        ) !important;
      }
    }
  }

  /* Dark mode hover color */
  @media (prefers-color-scheme: dark) {
    menu,
    menuitem,
    menucaption,
    :is(
        panelview .toolbarbutton-1,
        toolbarbutton.subviewbutton,
        .widget-overflow-list .toolbarbutton-1,
        .toolbaritem-combined-buttons:is(
            :not([cui-areatype="toolbar"]),
            [overflowedItem="true"]
          )
          > toolbarbutton
      ) {
      &:not([disabled]):hover {
        background-color: var(
          --mod-forkedtidypopup-hovercolor-dark,
          rgba(87, 65, 50, 255)
        ) !important;
      }
    }
  }
}

menu,
menuitem,
menucaption {
  border-radius: 8px !important;
  margin: 2px !important;
}

.panel-view-body-unscrollable {
  border-radius: 8px !important;
  background: var(--button-background-color-hover) !important;
  align-items: center !important;
  padding: 3px !important;
}

.downloadMainArea {
  padding-left: 10px !important;
}

/* Fix for Firefox accounts panel - center user icon vertically */
#fxa-manage-account-button {
  display: flex !important;
  align-items: center !important;
  min-height: 48px !important;
  padding-left: 36px !important; /* Add left padding to align with other buttons that have icons */
}

#fxa-manage-account-button > vbox {
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: flex-start !important;
  flex: 1 !important;
}

#fxa-manage-account-button label {
  margin: 0 !important;
  line-height: 1.2 !important;
}

#fxa-menu-header-title {
  margin-bottom: 2px !important;
}

/* Fix sync now button alignment */
#PanelUI-fxa-menu-syncnow-button {
  display: flex !important;
  align-items: center !important;
  min-height: 48px !important;
}

#PanelUI-fxa-menu-syncnow-button > hbox {
  display: flex !important;
  align-items: center !important;
  flex: 1 !important;
}

#PanelUI-fxa-menu-syncnow-button .syncnow-label {
  margin: 0 !important;
  line-height: 1.2 !important;
}

#PanelUI-appMenu-fxa-image-last-synced {
  margin-right: 8px !important;
}

/* Fix remote tabs section styling */
.PanelUI-tabitem-container {
  margin-bottom: 4px !important;
  display: flex !important;
  align-items: center !important;
}

.PanelUI-tabitem-container:last-child {
  margin-bottom: 0 !important;
}

.all-tabs-button {
  flex: 1 !important;
  margin-right: 4px !important;
}

.remote-tabs-close-button {
  min-width: 24px !important;
  width: 24px !important;
  height: 24px !important;
  padding: 2px !important;
  border-radius: 4px !important;
  margin: 0 !important;
}

.remote-tabs-close-button .toolbarbutton-icon {
  width: 16px !important;
  height: 16px !important;
}

/* Device label styling */
#synced-tabs-client-0 {
  margin-bottom: 8px !important;
  font-weight: bold !important;
  color: var(--panel-description-color, var(--text-color-deemphasized)) !important;
}
